$ git clone git@github.com:docker/docker-bench-security.git
Cloning into 'docker-bench-security'...
remote: Enumerating objects: 12, done.
remote: Counting objects: 100% (12/12), done.
remote: Compressing objects: 100% (10/10), done.
remote: Total 1739 (delta 4), reused 7 (delta 2), pack-reused 1727
Receiving objects: 100% (1739/1739), 2.36 MiB | 4.39 MiB/s, done.
Resolving deltas: 100% (1206/1206), done.
$ cd docker-bench-security/
$ sudo ./docker-bench-security.sh 
# ------------------------------------------------------------------------------
# Docker Bench for Security v1.3.4
#
# Docker, Inc. (c) 2015-
#
# Checks for dozens of common best-practices around deploying Docker containers in production.
# Inspired by the CIS Docker Community Edition Benchmark v1.1.0.
# ------------------------------------------------------------------------------

Initializing Fri Jul 19 14:32:06 EEST 2019


[INFO] 1 - Host Configuration
[WARN] 1.1  - Ensure a separate partition for containers has been created
[NOTE] 1.2  - Ensure the container host has been Hardened
[INFO] 1.3  - Ensure Docker is up to date
[INFO]      * Using 18.09.7, verify is it up to date as deemed necessary
[INFO]      * Your operating system vendor may provide support and security maintenance for Docker
[INFO] 1.4  - Ensure only trusted users are allowed to control Docker daemon
[INFO]      * docker:x:979:tpakarin
[WARN] 1.5  - Ensure auditing is configured for the Docker daemon
[WARN] 1.6  - Ensure auditing is configured for Docker files and directories - /var/lib/docker
[WARN] 1.7  - Ensure auditing is configured for Docker files and directories - /etc/docker
[WARN] 1.8  - Ensure auditing is configured for Docker files and directories - docker.service
[WARN] 1.9  - Ensure auditing is configured for Docker files and directories - docker.socket
[INFO] 1.10  - Ensure auditing is configured for Docker files and directories - /etc/default/docker
[INFO]      * File not found
[INFO] 1.11  - Ensure auditing is configured for Docker files and directories - /etc/docker/daemon.json
[INFO]      * File not found
[INFO] 1.12  - Ensure auditing is configured for Docker files and directories - /usr/bin/docker-containerd
[INFO]      * File not found
[INFO] 1.13  - Ensure auditing is configured for Docker files and directories - /usr/bin/docker-runc
[INFO]      * File not found


[INFO] 2 - Docker daemon configuration
[WARN] 2.1  - Ensure network traffic is restricted between containers on the default bridge
[PASS] 2.2  - Ensure the logging level is set to 'info'
[PASS] 2.3  - Ensure Docker is allowed to make changes to iptables
[PASS] 2.4  - Ensure insecure registries are not used
[PASS] 2.5  - Ensure aufs storage driver is not used
[INFO] 2.6  - Ensure TLS authentication for Docker daemon is configured
[INFO]      * Docker daemon not listening on TCP
[INFO] 2.7  - Ensure the default ulimit is configured appropriately
[INFO]      * Default ulimit doesn't appear to be set
[WARN] 2.8  - Enable user namespace support
[PASS] 2.9  - Ensure the default cgroup usage has been confirmed
[PASS] 2.10  - Ensure base device size is not changed until needed
[WARN] 2.11  - Ensure that authorization for Docker client commands is enabled
[WARN] 2.12  - Ensure centralized and remote logging is configured
[INFO] 2.13  - Ensure operations on legacy registry (v1) are Disabled (Deprecated)
[WARN] 2.14  - Ensure live restore is Enabled
[WARN] 2.15  - Ensure Userland Proxy is Disabled
[PASS] 2.16  - Ensure daemon-wide custom seccomp profile is applied, if needed
[PASS] 2.17  - Ensure experimental features are avoided in production
[WARN] 2.18  - Ensure containers are restricted from acquiring new privileges


[INFO] 3 - Docker daemon configuration files
[PASS] 3.1  - Ensure that docker.service file ownership is set to root:root
[PASS] 3.2  - Ensure that docker.service file permissions are set to 644 or more restrictive
[PASS] 3.3  - Ensure that docker.socket file ownership is set to root:root
[PASS] 3.4  - Ensure that docker.socket file permissions are set to 644 or more restrictive
[PASS] 3.5  - Ensure that /etc/docker directory ownership is set to root:root
[PASS] 3.6  - Ensure that /etc/docker directory permissions are set to 755 or more restrictive
[INFO] 3.7  - Ensure that registry certificate file ownership is set to root:root
[INFO]      * Directory not found
[INFO] 3.8  - Ensure that registry certificate file permissions are set to 444 or more restrictive
[INFO]      * Directory not found
[INFO] 3.9  - Ensure that TLS CA certificate file ownership is set to root:root
[INFO]      * No TLS CA certificate found
[INFO] 3.10  - Ensure that TLS CA certificate file permissions are set to 444 or more restrictive
[INFO]      * No TLS CA certificate found
[INFO] 3.11  - Ensure that Docker server certificate file ownership is set to root:root
[INFO]      * No TLS Server certificate found
[INFO] 3.12  - Ensure that Docker server certificate file permissions are set to 444 or more restrictive
[INFO]      * No TLS Server certificate found
[INFO] 3.13  - Ensure that Docker server certificate key file ownership is set to root:root
[INFO]      * No TLS Key found
[INFO] 3.14  - Ensure that Docker server certificate key file permissions are set to 400
[INFO]      * No TLS Key found
[PASS] 3.15  - Ensure that Docker socket file ownership is set to root:docker
[PASS] 3.16  - Ensure that Docker socket file permissions are set to 660 or more restrictive
[INFO] 3.17  - Ensure that daemon.json file ownership is set to root:root
[INFO]      * File not found
[INFO] 3.18  - Ensure that daemon.json file permissions are set to 644 or more restrictive
[INFO]      * File not found
[INFO] 3.19  - Ensure that /etc/default/docker file ownership is set to root:root
[INFO]      * File not found
[INFO] 3.20  - Ensure that /etc/default/docker file permissions are set to 644 or more restrictive
[INFO]      * File not found


[INFO] 4 - Container Images and Build File
[PASS] 4.1  - Ensure a user for the container has been created
[NOTE] 4.2  - Ensure that containers use trusted base images
[NOTE] 4.3  - Ensure unnecessary packages are not installed in the container
[NOTE] 4.4  - Ensure images are scanned and rebuilt to include security patches
[WARN] 4.5  - Ensure Content trust for Docker is Enabled
[WARN] 4.6  - Ensure HEALTHCHECK instructions have been added to the container image
[WARN]      * No Healthcheck found: [docker-bench-security:centos]
[WARN]      * No Healthcheck found: [backend:3.6]
[WARN]      * No Healthcheck found: [frontend:3.5]
[WARN]      * No Healthcheck found: [frontend:3.4]
[WARN]      * No Healthcheck found: [backend:3.4 backend:3.5]
[WARN]      * No Healthcheck found: [backend:3.4 backend:3.5]
[WARN]      * No Healthcheck found: [frontend:3.3]
[WARN]      * No Healthcheck found: [backend:3.3]
[WARN]      * No Healthcheck found: [yle-dl:latest]
[WARN]      * No Healthcheck found: [postgres:latest]
[WARN]      * No Healthcheck found: [nginx:latest]
[WARN]      * No Healthcheck found: [node:slim]
[WARN]      * No Healthcheck found: [python:slim]
[WARN]      * No Healthcheck found: [redis:latest]
[WARN]      * No Healthcheck found: [node:alpine]
[WARN]      * No Healthcheck found: [centos:latest]
[INFO] 4.7  - Ensure update instructions are not use alone in the Dockerfile
[INFO]      * Update instruction found: [yle-dl:latest]
[INFO]      * Update instruction found: [postgres:latest]
[INFO]      * Update instruction found: [python:slim]
[NOTE] 4.8  - Ensure setuid and setgid permissions are removed in the images
[PASS] 4.9  - Ensure COPY is used instead of ADD in Dockerfile
[NOTE] 4.10  - Ensure secrets are not stored in Dockerfiles
[NOTE] 4.11  - Ensure verified packages are only Installed


[INFO] 5 - Container Runtime
[WARN] 5.1  - Ensure AppArmor Profile is Enabled
[WARN]      * No AppArmorProfile Found: competent_hertz
[WARN] 5.2  - Ensure SELinux security options are set, if applicable
[WARN]      * No SecurityOptions Found: competent_hertz
[PASS] 5.3  - Ensure Linux Kernel Capabilities are restricted within containers
[PASS] 5.4  - Ensure privileged containers are not used
[PASS] 5.5  - Ensure sensitive host system directories are not mounted on containers
[PASS] 5.6  - Ensure ssh is not run within containers
[PASS] 5.7  - Ensure privileged ports are not mapped within containers
[NOTE] 5.8  - Ensure only needed ports are open on the container
[PASS] 5.9  - Ensure the host's network namespace is not shared
[WARN] 5.10  - Ensure memory usage for container is limited
[WARN]      * Container running without memory restrictions: competent_hertz
[WARN] 5.11  - Ensure CPU priority is set appropriately on the container
[WARN]      * Container running without CPU restrictions: competent_hertz
[WARN] 5.12  - Ensure the container's root filesystem is mounted as read only
[WARN]      * Container running with root FS mounted R/W: competent_hertz
[WARN] 5.13  - Ensure incoming container traffic is binded to a specific host interface
[WARN]      * Port being bound to wildcard IP: 0.0.0.0 in competent_hertz
[WARN] 5.14  - Ensure 'on-failure' container restart policy is set to '5'
[WARN]      * MaximumRetryCount is not set to 5: competent_hertz
[PASS] 5.15  - Ensure the host's process namespace is not shared
[PASS] 5.16  - Ensure the host's IPC namespace is not shared
[PASS] 5.17  - Ensure host devices are not directly exposed to containers
[INFO] 5.18  - Ensure the default ulimit is overwritten at runtime, only if needed
[INFO]      * Container no default ulimit override: competent_hertz
[PASS] 5.19  - Ensure mount propagation mode is not set to shared
[PASS] 5.20  - Ensure the host's UTS namespace is not shared
[PASS] 5.21  - Ensure the default seccomp profile is not Disabled
[NOTE] 5.22  - Ensure docker exec commands are not used with privileged option
[NOTE] 5.23  - Ensure docker exec commands are not used with user option
[PASS] 5.24  - Ensure cgroup usage is confirmed
[WARN] 5.25  - Ensure the container is restricted from acquiring additional privileges
[WARN]      * Privileges not restricted: competent_hertz
[WARN] 5.26  - Ensure container health is checked at runtime
[WARN]      * Health check not set: competent_hertz
[INFO] 5.27  - Ensure docker commands always get the latest version of the image
[WARN] 5.28  - Ensure PIDs cgroup limit is used
[WARN]      * PIDs limit not set: competent_hertz
[INFO] 5.29  - Ensure Docker's default bridge docker0 is not used
[INFO]      * Container in docker0 network: competent_hertz
[PASS] 5.30  - Ensure the host's user namespaces is not shared
[PASS] 5.31  - Ensure the Docker socket is not mounted inside any containers


[INFO] 6 - Docker Security Operations
[INFO] 6.1  - Avoid image sprawl
[INFO]      * There are currently: 24 images
[INFO] 6.2  - Avoid container sprawl
[INFO]      * There are currently a total of 23 containers, with 1 of them currently running


[INFO] 7 - Docker Swarm Configuration
[PASS] 7.1  - Ensure swarm mode is not Enabled, if not needed
[PASS] 7.2  - Ensure the minimum number of manager nodes have been created in a swarm (Swarm mode not enabled)
[PASS] 7.3  - Ensure swarm services are binded to a specific host interface (Swarm mode not enabled)
[PASS] 7.4  - Ensure data exchanged between containers are encrypted on different nodes on the overlay network
[PASS] 7.5  - Ensure Docker's secret management commands are used for managing secrets in a Swarm cluster (Swarm mode not enabled)
[PASS] 7.6  - Ensure swarm manager is run in auto-lock mode (Swarm mode not enabled)
[PASS] 7.7  - Ensure swarm manager auto-lock key is rotated periodically (Swarm mode not enabled)
[PASS] 7.8  - Ensure node certificates are rotated as appropriate (Swarm mode not enabled)
[PASS] 7.9  - Ensure CA certificates are rotated as appropriate (Swarm mode not enabled)
[PASS] 7.10  - Ensure management plane traffic has been separated from data plane traffic (Swarm mode not enabled)

[INFO] Checks: 105
[INFO] Score: 16
$ docker-compose up
WARNING: Some services (backend) use the 'deploy' key, which will be ignored. Compose does not support 'deploy' configuration - use `docker stack deploy` to deploy to a swarm.
Creating network "36_default" with the default driver
Creating volume "36_backend_logs" with default driver
Creating volume "36_frontend_logs" with default driver
Building frontend
Step 1/13 : FROM node:alpine as build-frontend
 ---> a9a8b83644f7
Step 2/13 : ENV NODE_ENV=production
 ---> Running in 5a03dd6c5773
Removing intermediate container 5a03dd6c5773
 ---> 6abb8cba3678
Step 3/13 : WORKDIR /home/node/
 ---> Running in 3053a4e8d15d
Removing intermediate container 3053a4e8d15d
 ---> 48512fe8da27
Step 4/13 : RUN wget -O - https://github.com/docker-hy/frontend-example-docker/tarball/master | tar xz &&     mv -f docker-hy-frontend-example-docker-*/* . &&     rm -f -r docker-hy-frontend-example-docker-* &&     npm install &&     npm run-script build
 ---> Running in e0df208ef623
Connecting to github.com (140.82.118.3:443)
Connecting to codeload.github.com (140.82.113.9:443)
-                    47832 --:--:-- ETA
-                    100% |********************************| 91524  0:00:00 ETA

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

added 1029 packages from 415 contributors and audited 11636 packages in 20.708s
found 311 vulnerabilities (4 moderate, 307 high)
  run `npm audit fix` to fix them, or `npm audit` for details

> frontend-example-docker@1.0.0 build /home/node
> webpack --mode production

Browserslist: caniuse-lite is outdated. Please run next command `npm update caniuse-lite browserslist`
Hash: 1bcb2b1097ed8320432f
Version: webpack 4.29.6
Time: 23909ms
Built at: 07/19/2019 12:04:47 PM
                                 Asset       Size  Chunks                    Chunk Names
0ab54153eeeca0ce03978cc463b257f7.woff2   39.2 KiB          [emitted]         
  13db00b7a34fee4d819ab7f9838cc428.eot   96.3 KiB          [emitted]         
  701ae6abd4719e9c2ada3535a497b341.eot   30.4 KiB          [emitted]         
  82f60bd0b94a1ed68b1e6e309ce2e8c3.svg    105 KiB          [emitted]         
  8e3c7f5520f5ae906c6cf6d7f3ddcd19.eot    104 KiB          [emitted]         
  962a1bf31c081691065fe333d9fa8105.svg    382 KiB          [emitted]  [big]  
  9c74e172f87984c48ddf5c8108cabe67.png   27.5 KiB          [emitted]         
 a046592bac8f2fd96e994733faf3858c.woff   62.2 KiB          [emitted]         
  a1a749e89f578a49306ec2b055c073da.svg    496 KiB          [emitted]  [big]  
  a3e2211dddcba197b5bbf2aa9d5d9a9a.svg   3.19 KiB          [emitted]         
  ad97afd3337e8cda302d10ff5a4026b8.ttf   30.2 KiB          [emitted]         
  b87b9ba532ace76ae9f6edfe9f72ded2.ttf    103 KiB          [emitted]         
  bff6c47a9da5c7cfa2e8a552e2df3a78.svg    3.2 KiB          [emitted]         
  c5ebe0b32dc1b5cc449a76c4204d13bb.ttf   96.1 KiB          [emitted]         
cd6c777f1945164224dee082abaea03a.woff2     12 KiB          [emitted]         
e8c322de9658cbeb8a774b6624167c2c.woff2   53.2 KiB          [emitted]         
 ef60a4f6c25ef7f39f2d25a748dbecfe.woff   14.4 KiB          [emitted]         
 faff92145777a3cbaf8e7367b4807987.woff   49.3 KiB          [emitted]         
                            index.html  454 bytes          [emitted]         
                              main.css  127 bytes       0  [emitted]         main
                               main.js   19.1 KiB       0  [emitted]         main
                    vendors~main-1.css    602 KiB       1  [emitted]  [big]  vendors~main
                       vendors~main.js    328 KiB       1  [emitted]  [big]  vendors~main
Entrypoint main [big] = vendors~main-1.css vendors~main.js main.css main.js
  [7] ./node_modules/semantic-ui-react/dist/es/lib/index.js + 1 modules 2.94 KiB {1} [built]
      |    2 modules
 [51] ./node_modules/semantic-ui-react/dist/es/elements/Icon/Icon.js + 1 modules 6.22 KiB {1} [built]
      |    2 modules
 [80] ./node_modules/react-redux/es/index.js + 19 modules 36.2 KiB {1} [built]
      |    20 modules
 [93] ./node_modules/semantic-ui-react/dist/es/elements/Label/Label.js + 2 modules 10.6 KiB {1} [built]
      |    3 modules
 [94] (webpack)/buildin/global.js 472 bytes {1} [built]
[246] ./src/assets/toscalogo_color.svg 82 bytes {0} [built]
[247] ./src/assets/toscalogo_grayscale.svg 82 bytes {0} [built]
[266] multi @babel/polyfill ./src 40 bytes {0} [built]
[446] (webpack)/buildin/harmony-module.js 573 bytes {1} [built]
[448] ./src/assets/custom.css 39 bytes {0} [built]
[585] ./src/index.js + 18 modules 37.8 KiB {0} [built]
      | ./src/index.js 569 bytes [built]
      | ./src/util/store.js 481 bytes [built]
      | ./util/common.js 117 bytes [built]
      | ./src/util/apiConnection.js 4.7 KiB [built]
      | ./src/util/redux/index.js 219 bytes [built]
      | ./src/util/redux/messageReducer.js 1.76 KiB [built]
      | ./src/util/redux/simpleReducer.js 1.47 KiB [built]
      | ./src/util/common.js 221 bytes [built]
      |     + 11 hidden modules
[586] ./node_modules/semantic-ui-react/dist/es/elements/Button/Button.js + 3 modules 17.7 KiB {1} [built]
      |    4 modules
[594] ./node_modules/react-router-dom/es/BrowserRouter.js + 12 modules 41 KiB {1} [built]
      |    13 modules
[596] ./node_modules/react-router-dom/es/Switch.js + 1 modules 3.35 KiB {1} [built]
      |    2 modules
[597] ./node_modules/react-router-dom/es/Route.js + 1 modules 5.9 KiB {1} [built]
      |    2 modules
    + 971 hidden modules

WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).
This can impact web performance.
Assets: 
  a1a749e89f578a49306ec2b055c073da.svg (496 KiB)
  962a1bf31c081691065fe333d9fa8105.svg (382 KiB)
  vendors~main-1.css (602 KiB)
  vendors~main.js (328 KiB)

WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.
Entrypoints:
  main (949 KiB)
      vendors~main-1.css
      vendors~main.js
      main.css
      main.js


WARNING in webpack performance recommendations: 
You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.
For more info visit https://webpack.js.org/guides/code-splitting/
Child html-webpack-plugin for "index.html":
     1 asset
    Entrypoint undefined = index.html
    [2] (webpack)/buildin/global.js 472 bytes {0} [built]
    [3] (webpack)/buildin/module.js 497 bytes {0} [built]
        + 2 hidden modules
Child mini-css-extract-plugin node_modules/css-loader/index.js!node_modules/semantic-ui-css/semantic.min.css:
    Entrypoint mini-css-extract-plugin = *
       19 modules
Child mini-css-extract-plugin node_modules/css-loader/index.js!src/assets/custom.css:
    Entrypoint mini-css-extract-plugin = *
    [0] ./node_modules/css-loader!./src/assets/custom.css 340 bytes {0} [built]
        + 1 hidden module
Removing intermediate container e0df208ef623
 ---> a12b027df82a

Step 5/13 : FROM node:alpine
 ---> a9a8b83644f7
Step 6/13 : EXPOSE 5000
 ---> Using cache
 ---> b42b168e21e9
Step 7/13 : ENV API_URL=http://localhost:80/api
 ---> Using cache
 ---> 835230a1ab04
Step 8/13 : ENV NODE_ENV=production
 ---> Using cache
 ---> 1fe641de5732
Step 9/13 : WORKDIR /home/node/
 ---> Using cache
 ---> 86ee56082e0f
Step 10/13 : COPY --from=build-frontend /home/node/dist/ dist/
 ---> Using cache
 ---> 1254e38de345
Step 11/13 : RUN npm install -g serve &&     mkdir /home/node/logs &&     touch /home/node/logs/logs.txt &&     ln -s /home/node/logs/logs.txt /home/node/logs.txt &&     rm -f -r /var/cache/* /var/log/* /var/tmp/* /tmp/* &&     chown -R node:node .
 ---> Using cache
 ---> 14e9ec3a49b3
Step 12/13 : USER node
 ---> Using cache
 ---> 4e88b33c4a0b
Step 13/13 : CMD serve -s -l 5000 dist
 ---> Using cache
 ---> ed7ccb33a76a

Successfully built ed7ccb33a76a
Successfully tagged frontend:3.6
WARNING: Image for service frontend was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
Creating 36_frontend_1 ... done
Creating 36_redis_1    ... done
Creating 36_db_1       ... done
Creating 36_backend_1  ... done
Creating 36_nginx_1    ... done
Attaching to 36_frontend_1, 36_db_1, 36_redis_1, 36_backend_1, 36_nginx_1
frontend_1  | INFO: Accepting connections at http://localhost:5000
db_1        | The files belonging to this database system will be owned by user "postgres".
db_1        | This user must also own the server process.
db_1        | 
db_1        | The database cluster will be initialized with locale "en_US.utf8".
db_1        | The default database encoding has accordingly been set to "UTF8".
db_1        | The default text search configuration will be set to "english".
db_1        | 
db_1        | Data page checksums are disabled.
db_1        | 
db_1        | fixing permissions on existing directory /var/lib/postgresql/data ... ok
db_1        | creating subdirectories ... ok
db_1        | selecting default max_connections ... 100
db_1        | selecting default shared_buffers ... 128MB
db_1        | selecting default timezone ... Etc/UTC
db_1        | selecting dynamic shared memory implementation ... posix
db_1        | creating configuration files ... ok
db_1        | running bootstrap script ... ok
db_1        | performing post-bootstrap initialization ... ok
redis_1     | 1:C 19 Jul 2019 12:04:57.040 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis_1     | 1:C 19 Jul 2019 12:04:57.040 # Redis version=5.0.5, bits=64, commit=00000000, modified=0, pid=1, just started
redis_1     | 1:C 19 Jul 2019 12:04:57.040 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
redis_1     | 1:M 19 Jul 2019 12:04:57.043 * Running mode=standalone, port=6379.
redis_1     | 1:M 19 Jul 2019 12:04:57.043 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
redis_1     | 1:M 19 Jul 2019 12:04:57.043 # Server initialized
redis_1     | 1:M 19 Jul 2019 12:04:57.043 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis_1     | 1:M 19 Jul 2019 12:04:57.043 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
redis_1     | 1:M 19 Jul 2019 12:04:57.043 * Ready to accept connections
backend_1   | Browserslist: caniuse-lite is outdated. Please run next command `npm update caniuse-lite browserslist`
db_1        | syncing data to disk ... 
db_1        | WARNING: enabling "trust" authentication for local connections
db_1        | You can change this by editing pg_hba.conf or using the option -A, or
db_1        | --auth-local and --auth-host, the next time you run initdb.
db_1        | ok
db_1        | 
db_1        | Success. You can now start the database server using:
db_1        | 
db_1        |     pg_ctl -D /var/lib/postgresql/data -l logfile start
db_1        | 
db_1        | waiting for server to start....2019-07-19 12:04:59.325 UTC [42] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
db_1        | 2019-07-19 12:04:59.353 UTC [43] LOG:  database system was shut down at 2019-07-19 12:04:58 UTC
db_1        | 2019-07-19 12:04:59.358 UTC [42] LOG:  database system is ready to accept connections
db_1        |  done
db_1        | server started
db_1        | 
db_1        | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
db_1        | 
db_1        | waiting for server to shut down....2019-07-19 12:04:59.408 UTC [42] LOG:  received fast shutdown request
db_1        | 2019-07-19 12:04:59.410 UTC [42] LOG:  aborting any active transactions
db_1        | 2019-07-19 12:04:59.414 UTC [42] LOG:  background worker "logical replication launcher" (PID 49) exited with exit code 1
db_1        | 2019-07-19 12:04:59.417 UTC [44] LOG:  shutting down
db_1        | 2019-07-19 12:04:59.447 UTC [42] LOG:  database system is shut down
db_1        |  done
db_1        | server stopped
db_1        | 
db_1        | PostgreSQL init process complete; ready for start up.
db_1        | 
db_1        | 2019-07-19 12:04:59.537 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
db_1        | 2019-07-19 12:04:59.537 UTC [1] LOG:  listening on IPv6 address "::", port 5432
db_1        | 2019-07-19 12:04:59.541 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
db_1        | 2019-07-19 12:04:59.571 UTC [51] LOG:  database system was shut down at 2019-07-19 12:04:59 UTC
db_1        | 2019-07-19 12:04:59.580 UTC [1] LOG:  database system is ready to accept connections
backend_1   | Fri, 19 Jul 2019 12:04:59 GMT sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more at http://docs.sequelizejs.com/manual/tutorial/querying.html#operators at node_modules/sequelize/lib/sequelize.js:242:13
backend_1   | Testing database connection
backend_1   | Redis connection, initating..
backend_1   | Trying to set cache
backend_1   | Cache set successfully
backend_1   | Started on port 8000
backend_1   | Executing (default): SELECT 1+1 AS result
backend_1   | Connection ok, syncing database with model.
backend_1   | Executing (default): CREATE TABLE IF NOT EXISTS "messages" ("id"   SERIAL , "body" VARCHAR(255), "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
backend_1   | Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'messages' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
backend_1   | Database connection established!
##### Run from another console
$ firefox localhost &
#####
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:18 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:18 +0000] "GET /main.css HTTP/1.1" 200 127 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:18 +0000] "GET /main.js HTTP/1.1" 200 4680 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:18 +0000] "GET /vendors~main.js HTTP/1.1" 200 106184 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:18 +0000] "GET /vendors~main-1.css HTTP/1.1" 200 103174 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:18 +0000] "GET /a3e2211dddcba197b5bbf2aa9d5d9a9a.svg HTTP/1.1" 200 1524 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:19 +0000] "GET /favicon.ico HTTP/1.1" 200 454 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:19 +0000] "GET /favicon.ico HTTP/1.1" 200 454 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:23 +0000] "GET /api/ping HTTP/1.1" 200 4 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
backend_1   | Got from redis pong
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:24 +0000] "GET /api/slow HTTP/1.1" 200 4 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:28 +0000] "POST /api/messages HTTP/1.1" 201 7 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
backend_1   | Executing (default): INSERT INTO "messages" ("id","body","createdAt","updatedAt") VALUES (DEFAULT,'a','2019-07-19 12:12:28.389 +00:00','2019-07-19 12:12:28.389 +00:00') RETURNING *;
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:30 +0000] "POST /api/messages HTTP/1.1" 201 7 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
backend_1   | Executing (default): INSERT INTO "messages" ("id","body","createdAt","updatedAt") VALUES (DEFAULT,'b','2019-07-19 12:12:30.939 +00:00','2019-07-19 12:12:30.939 +00:00') RETURNING *;
backend_1   | Executing (default): SELECT "id", "body", "createdAt", "updatedAt" FROM "messages" AS "message";
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:32 +0000] "GET /api/messages HTTP/1.1" 200 197 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
nginx_1     | 172.18.0.1 - - [19/Jul/2019:12:12:33 +0000] "GET /api/ping HTTP/1.1" 304 0 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0"
Gracefully stopping... (press Ctrl+C again to force)
Stopping 36_nginx_1    ... done
Stopping 36_backend_1  ... done
Stopping 36_db_1       ... done
Stopping 36_redis_1    ... done
Stopping 36_frontend_1 ... done
$ 
